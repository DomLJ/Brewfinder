(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(3),i=a.n(n),o=(a(10),a(4)),c=a(1),l=a.n(c);class m extends s.Component{constructor(e){super(e),this.state={map:null,marker:null}}componentDidMount(){this.setState({map:this.initiateMap()})}initiateMap(){const e=l.a.map("map",{zoomControl:!1}).setView(this.position,12);return l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),this.setMarker(e),l.a.control.zoom({position:"bottomright"}).addTo(e),setTimeout(e.invalidateSize.bind(e)),e}componentDidUpdate(e){this.state.map instanceof l.a.Map&&e.chosenBrewery!==this.props.chosenBrewery&&(this.state.map.setView(this.position,12),this.setMarker(this.state.map))}setMarker(e){var t;null===(t=this.state.marker)||void 0===t||t.remove();const a=l.a.marker(this.position).addTo(e).bindPopup(this.name);this.setState({marker:a})}get position(){return this.props.chosenBrewery.latitude?[parseInt(this.props.chosenBrewery.latitude),parseInt(this.props.chosenBrewery.longitude)]:[0,0]}get name(){var e;return null!==(e=this.props.chosenBrewery.name)&&void 0!==e?e:""}render(){return r.a.createElement("div",{className:"map"},r.a.createElement("div",{id:"map",className:"map__content"}),r.a.createElement("div",{className:"map__curtain ".concat(this.props.chosenBrewery.latitude?"invisible":" ")},r.a.createElement("p",{className:"map__explanation"},"Sorry, geographical coordinates are unknown")))}}var u=m;var p=function(e){const t=e.chosenBrewery;return r.a.createElement("div",{className:"brewery-data"},t.name&&0!==e.id?r.a.createElement("p",{className:"brewery-data__paragraph"},t.name):null,t.street&&t.city&&t.state?r.a.createElement("p",{className:"brewery-data__paragraph"},"".concat(t.street,", ").concat(t.city,", ").concat(t.state)):null,t.website_url?r.a.createElement("a",{className:"brewery-data__link",href:t.website_url},t.website_url.slice(11)):null)};var h=function(e){return r.a.createElement("li",{className:"suggestions__item"},r.a.createElement("button",{className:"suggestions__button",id:e.breweryId,onClick:()=>e.pickBrewery(e.breweryId)},e.name))};var d=function(e){const t=e.autocompleteResult.map(t=>r.a.createElement(h,{name:t.name,key:t.id,breweryId:t.id,pickBrewery:e.pickBrewery})),a=e.isSuggestionsVisible?"":"suggestions--invisible";return r.a.createElement("div",{className:"suggestions ".concat(a)},r.a.createElement("ul",{className:"suggestions__list"},t))};var b=function(e){const t=e.isSuggestionsVisible?"input--active":"";return r.a.createElement("input",{className:"input ".concat(t),placeholder:"Search Brewery...",onChange:t=>e.autocomplete(t.target.value),value:e.inputValue})};class w extends s.Component{constructor(e){super(e),this.debounceAutocomplete=void 0,this.state={autocompleteResult:[],search:"",key:0,chosenBrewery:{name:"New York City",latitude:"40.730610",longitude:"-73.935242"},isSuggestionsVisible:!1},this.submitAutocomplete=this.submitAutocomplete.bind(this),this.pickBrewery=this.pickBrewery.bind(this),this.debounceAutocomplete=Object(o.debounce)(this.requestAutocomplete,1500)}handleErrors(e){if(!e.ok)throw Error(e.statusText);return e}submitAutocomplete(e){e?this.setState({search:e,isSuggestionsVisible:!0},this.debounceAutocomplete):this.setState({search:"",isSuggestionsVisible:!1})}requestAutocomplete(){fetch("https://api.openbrewerydb.org/breweries/autocomplete?query=".concat(this.state.search)).then(this.handleErrors).then(e=>e.json()).then(e=>this.setState({autocompleteResult:e})).catch(()=>new Error)}pickBrewery(e){fetch("https://api.openbrewerydb.org/breweries/".concat(e)).then(e=>e.json()).then(e=>this.setState(t=>({chosenBrewery:e,key:t.key+1,search:e.name,isSuggestionsVisible:!1,autocompleteResult:[]})))}render(){return r.a.createElement("main",{className:"main"},r.a.createElement(b,{autocomplete:this.submitAutocomplete,inputValue:this.state.search,isSuggestionsVisible:this.state.isSuggestionsVisible}),r.a.createElement(d,{autocomplete:this.submitAutocomplete,autocompleteResult:this.state.autocompleteResult,pickBrewery:this.pickBrewery,isSuggestionsVisible:this.state.isSuggestionsVisible}),r.a.createElement(p,{chosenBrewery:this.state.chosenBrewery,id:this.state.key}),r.a.createElement(u,{chosenBrewery:this.state.chosenBrewery}))}}var y=w;var g=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__container"},r.a.createElement("div",{className:"footer__content"},"Powered by:",r.a.createElement("a",{className:"footer__link",href:"https://www.openbrewerydb.org"},"Open Brewery DB")),r.a.createElement("div",{className:"footer__content"},"Created by: Dominik J\xf3zefiak")))};var E=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Brewfinder"),r.a.createElement("a",{className:"header__link",href:"https://github.com/DomLJ/Brewfinder"},r.a.createElement("i",{className:"header__icon fab fa-github"})))};var _=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement(y,null),r.a.createElement(g,null))};a(13);i.a.render(r.a.createElement(_,null),document.getElementById("root"))},5:function(e,t,a){e.exports=a(14)}},[[5,1,2]]]);
//# sourceMappingURL=main.91f5bc31.chunk.js.map